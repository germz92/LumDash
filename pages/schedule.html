<!-- Google Fonts Roboto -->
<link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700&display=swap" rel="stylesheet">

<div class="schedule-page">
  <!-- Fixed top section -->
  <div class="top-controls-fixed">
    <h2 id="eventTitle">Program Schedule</h2>

    <div class="top-controls">
      <input id="newDate" type="date" placeholder="Select Date">
      <button class="add-btn">+ Add Date</button>
      <span id="toggleAllNotesBtn" class="show-notes-btn" onclick="toggleAllNotes()" style="margin-left: 16px;">Show All Notes</span>
      <button id="importBtn" class="import-btn" style="margin-left: 16px; background-color: #4a5568;">Import Schedule</button>
      <button id="exportBtn" class="export-btn" style="margin-left: 8px; background-color: #28a745;">Export to Excel</button>
      <input type="file" id="fileImport" accept=".csv,.xlsx,.xls" style="display: none;">
      <a href="#" id="downloadTemplateBtn" onclick="downloadImportTemplate()" style="margin-left: 8px; font-size: 14px; color: #4a5568;">Download Template</a>
      <button id="shareScheduleBtn" class="share-schedule-btn" style="margin-left: 16px; background-color: #1565c0;" onclick="openShareScheduleModal()">
        <span class="material-symbols-outlined" style="font-size: 18px; vertical-align: middle; margin-right: 4px;">share</span>Share
      </button>
      <button id="viewToggleBtn" class="view-toggle-btn desktop-only" onclick="toggleScheduleView()" style="margin-left: 16px;">
        <span class="material-symbols-outlined">view_module</span>
        <span id="viewToggleText">Card View</span>
      </button>
    </div>

    <div id="searchFilterContainer" class="top-controls">
      <select id="filterDateDropdown">
        <option value="all">All Dates</option>
        <!-- JS will populate more -->
      </select>
      <input id="searchInput" type="text" placeholder="Search..." oninput="handleSearchInput(event)">
    </div>
  </div>

  <div id="programSections" class="program-container"></div>
  <div id="scheduleTableView" class="schedule-table-view"></div>

  <!-- Share Schedule Modal -->
  <div id="shareScheduleModal" class="share-modal-overlay" style="display:none;">
    <div class="share-modal-content">
      <div class="share-modal-header">
        <h3><span class="material-symbols-outlined" style="vertical-align: middle; margin-right: 6px;">share</span>Share Schedule with Client</h3>
        <button class="share-modal-close" onclick="closeShareScheduleModal()">&times;</button>
      </div>
      <div class="share-modal-body">
        <p style="color: #555; margin-bottom: 16px;">Generate a view-only link to share the schedule with your client. They will be able to view, search, and filter the schedule but cannot make any edits.</p>
        <div id="shareModalLoading" style="text-align:center; padding: 20px;">
          <div style="width:32px;height:32px;border:3px solid #e0e0e0;border-top:3px solid #1565c0;border-radius:50%;animation:spin .8s linear infinite;margin:0 auto 12px;"></div>
          <span style="color:#888;">Generating link...</span>
        </div>
        <div id="shareModalResult" style="display:none;">
          <label style="font-weight:500;font-size:13px;color:#555;display:block;margin-bottom:6px;">Share Link</label>
          <div style="display:flex; gap:8px; align-items:center;">
            <input type="text" id="shareLinkInput" readonly style="flex:1; padding:10px 12px; border:1.5px solid #ccc; border-radius:8px; font-size:14px; background:#f8f9fa; color:#333;">
            <button id="copyShareLinkBtn" onclick="copyShareLink()" style="padding:10px 18px; background:#1565c0; color:white; border:none; border-radius:8px; cursor:pointer; font-weight:600; white-space:nowrap; transition: background 0.2s;">
              <span class="material-symbols-outlined" style="font-size:18px; vertical-align:middle; margin-right:4px;">content_copy</span>Copy
            </button>
          </div>
          <div id="shareCopyFeedback" style="display:none; color:#28a745; font-size:13px; margin-top:8px; font-weight:500;">
            <span class="material-symbols-outlined" style="font-size:16px; vertical-align:middle; margin-right:4px;">check_circle</span>Link copied to clipboard!
          </div>
          <div style="margin-top:20px; padding-top:16px; border-top:1px solid #eee;">
            <button id="revokeShareBtn" onclick="revokeShareLink()" style="padding:8px 16px; background:#fff; color:#dc3545; border:1.5px solid #dc3545; border-radius:8px; cursor:pointer; font-weight:500; font-size:13px; transition: all 0.2s;">
              <span class="material-symbols-outlined" style="font-size:16px; vertical-align:middle; margin-right:4px;">link_off</span>Revoke Link
            </button>
            <span style="font-size:12px; color:#888; margin-left:12px;">Disables the current share link</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
